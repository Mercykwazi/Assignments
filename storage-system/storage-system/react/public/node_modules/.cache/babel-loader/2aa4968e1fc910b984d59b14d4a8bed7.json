{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/forms/view-business.js\";\nimport React from 'react';\nimport * as actions from '../../../actions/view-business';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport jwtDecode from 'jwt-decode';\nimport history from '../../../history';\n\nvar ViewBusiness =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewBusiness, _React$Component);\n\n  function ViewBusiness(props) {\n    var _this;\n\n    _classCallCheck(this, ViewBusiness);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewBusiness).call(this, props));\n    _this.state = {\n      businessDetail: [],\n      selectedBusiness: _this.props.select,\n      errorMessage: \"\",\n      err: false\n    };\n    _this.businessDetails = _this.businessDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.submitData = _this.submitData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ViewBusiness, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.businessDetails();\n    }\n  }, {\n    key: \"businessDetails\",\n    value: function () {\n      var _businessDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var token, decodedToken, decodedEmail, business, businessD;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                token = sessionStorage.getItem('jwtToken');\n                decodedToken = jwtDecode(token);\n                decodedEmail = decodedToken.email;\n                _context.next = 5;\n                return axios.get(\"http://localhost:3003/business/\" + decodedEmail);\n\n              case 5:\n                business = _context.sent;\n                console.log(\"business\", business);\n                businessD = business.data.rows;\n\n                if (businessD = ![]) {\n                  console.log(\"this is true\");\n                  this.setState({\n                    businessDetail: businessD\n                  });\n                } else {\n                  this.setState({\n                    err: true,\n                    errorMessage: \"please register your business first\"\n                  });\n                  console.log('this is falseee');\n                }\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function businessDetails() {\n        return _businessDetails.apply(this, arguments);\n      }\n\n      return businessDetails;\n    }()\n  }, {\n    key: \"submitData\",\n    value: function submitData() {\n      history.push('/location');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"Select your business\"), this.state.err && React.createElement(\"h3\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"div\", {\n        className: \"view-business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this2.props.setTheBusiness(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Select business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Select business:\"), this.state.businessDetail.length > 0 ? this.state.businessDetail.map(function (item) {\n        return React.createElement(\"option\", {\n          key: _this2.state.businessDetail.indexOf(item),\n          value: item.business_name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, item.business_name);\n      }) : null), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"next\",\n        onClick: this.submitData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"next\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ViewBusiness;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    select: state.viewBusiness.selectedBusiness,\n    state: state\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setTheBusiness: function setTheBusiness(name) {\n      dispatch(actions.businessName(name));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewBusiness);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/forms/view-business.js"],"names":["React","actions","connect","axios","Redirect","jwtDecode","history","ViewBusiness","props","state","businessDetail","selectedBusiness","select","errorMessage","err","businessDetails","bind","submitData","token","sessionStorage","getItem","decodedToken","decodedEmail","email","get","business","console","log","businessD","data","rows","setState","push","color","e","setTheBusiness","target","value","length","map","item","indexOf","business_name","Component","mapStateToProps","viewBusiness","mapDispatchToProps","dispatch","name","businessName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as actions from '../../../actions/view-business';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { Redirect } from 'react-router'\nimport jwtDecode from 'jwt-decode';\nimport history from '../../../history'\n\nclass ViewBusiness extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            businessDetail: [],\n            selectedBusiness: this.props.select,\n            errorMessage: \"\",\n            err: false,\n        }\n        this.businessDetails = this.businessDetails.bind(this);\n        this.submitData = this.submitData.bind(this)\n    }\n    componentDidMount() {\n        this.businessDetails()\n    }\n\n    async businessDetails() {\n        var token = sessionStorage.getItem('jwtToken');\n        const decodedToken = jwtDecode(token)\n        var decodedEmail = decodedToken.email\n        var business = await axios.get(\"http://localhost:3003/business/\" + decodedEmail)\n        console.log(\"business\", business)\n        var businessD = business.data.rows;\n        if (businessD = ![]) {\n            console.log(\"this is true\")\n            this.setState({ businessDetail: businessD })\n        } else {\n            this.setState({err:true,errorMessage:\"please register your business first\"})\n            console.log('this is falseee');\n\n        }\n\n    }\n\n    submitData() {\n        history.push('/location')\n    }\n\n\n    render() {\n       \n        return (<div>\n            <h2>Select your business</h2>\n            {this.state.err && (\n            <h3 style={{ color: \"red\" }}>{this.state.errorMessage}</h3>\n        )}\n            <div className=\"view-business\">\n                <select onChange={(e) => this.props.setTheBusiness(e.target.value)}>\n                    <option value=\"Select business\">Select business:</option>\n                    {this.state.businessDetail.length > 0 ? this.state.businessDetail.map(item => {\n                        return <option key={this.state.businessDetail.indexOf(item)} value={item.business_name}>{item.business_name}</option>\n                    }) : null}\n                </select><br />\n                <button className=\"next\" onClick={this.submitData}>next</button><br />\n            </div>\n        </div>)\n    }\n}\nconst mapStateToProps = (state) => {\n    return {\n        select: state.viewBusiness.selectedBusiness,\n        state: state\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setTheBusiness: name => {\n            dispatch(actions.businessName(name))\n        },\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewBusiness)\n"]},"metadata":{},"sourceType":"module"}