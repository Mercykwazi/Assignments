{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/sign-up.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { protectRoutes } from '../protectedRoutes';\nimport { checkUserStatus } from \"../../index\";\nimport * as actions from '../../actions/register';\nimport history from '../../history';\n\nvar SigningUp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SigningUp, _React$Component);\n\n  function SigningUp(props) {\n    var _this;\n\n    _classCallCheck(this, SigningUp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SigningUp).call(this, props));\n    _this.state = {\n      password: \"\",\n      firstName: \"\",\n      email: \"\",\n      redirect: false,\n      isPasswordVisible: false\n    };\n    _this.contactName = _this.contactName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.email = _this.email.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.password = _this.password.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveData = _this.saveData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logIn = _this.logIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SigningUp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      checkUserStatus();\n    }\n  }, {\n    key: \"email\",\n    value: function email(e) {\n      var change = {};\n      change[e.target.name] = e.target.value;\n      this.setState(change);\n    }\n  }, {\n    key: \"contactName\",\n    value: function contactName(e) {\n      var change = {};\n      change[e.target.name] = e.target.value;\n      this.setState(change);\n    }\n  }, {\n    key: \"password\",\n    value: function password(e) {\n      var change = {};\n      change[e.target.name] = e.target.value;\n      this.setState(change);\n    }\n  }, {\n    key: \"saveData\",\n    value: function () {\n      var _saveData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var businessDetails, results, checking;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                businessDetails = {\n                  name: this.state.firstName,\n                  email: this.state.email,\n                  password: this.state.password\n                };\n                _context.next = 4;\n                return axios.post(\"http://localhost:3003/registerBusiness\", businessDetails);\n\n              case 4:\n                results = _context.sent;\n\n                if (results.status != 200) {} else {\n                  checking = sessionStorage.setItem('jwtToken', results.data);\n                  protectRoutes();\n                  this.props.authorizeBusiness();\n                  history.push('/business');\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function saveData(_x) {\n        return _saveData.apply(this, arguments);\n      }\n\n      return saveData;\n    }()\n  }, {\n    key: \"logIn\",\n    value: function () {\n      var _logIn = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                history.push(\"/sign-in\");\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function logIn() {\n        return _logIn.apply(this, arguments);\n      }\n\n      return logIn;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Fill in your personal details\"), React.createElement(\"div\", {\n        className: \"signing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        onChange: this.email,\n        value: this.state.email,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Password:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), this.state.isPasswordVisible ? React.createElement(\"input\", {\n        name: \"password\",\n        type: \"text\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        value: this.state.password,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }) : React.createElement(\"input\", {\n        type: \"password\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        value: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"show\",\n        onClick: function onClick() {\n          return _this2.setState({\n            isPasswordVisible: !_this2.state.isPasswordVisible\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.state.isPasswordVisible ? 'Hide' : 'Show', \" Password\")), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.saveData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"sign up\"))), React.createElement(\"footer\", {\n        className: \"business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Already have an account?\"), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.logIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Log in\")));\n    }\n  }]);\n\n  return SigningUp;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    authorizeBusiness: function authorizeBusiness() {\n      dispatch(actions.authorizeBusiness());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SigningUp);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/sign-up.js"],"names":["React","connect","axios","protectRoutes","checkUserStatus","actions","history","SigningUp","props","state","password","firstName","email","redirect","isPasswordVisible","contactName","bind","saveData","logIn","e","change","target","name","value","setState","preventDefault","businessDetails","post","results","status","checking","sessionStorage","setItem","data","authorizeBusiness","push","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { protectRoutes } from '../protectedRoutes';\nimport { checkUserStatus } from \"../../index\"\nimport * as actions from '../../actions/register'\nimport history from '../../history'\n\nclass SigningUp extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            password: \"\",\n            firstName: \"\",\n            email: \"\",\n            redirect: false,\n            isPasswordVisible: false,\n        }\n        this.contactName = this.contactName.bind(this)\n        this.email = this.email.bind(this)\n        this.password = this.password.bind(this)\n        this.saveData = this.saveData.bind(this)\n        this.logIn = this.logIn.bind(this)\n    }\n\n\n    componentDidMount() {\n        checkUserStatus()\n    }\n\n\n    email(e) {\n        var change = {};\n        change[e.target.name] = e.target.value;\n        this.setState(change);\n    }\n\n    contactName(e) {\n        var change = {};\n        change[e.target.name] = e.target.value;\n        this.setState(change);\n    }\n    password(e) {\n        var change = {};\n        change[e.target.name] = e.target.value;\n        this.setState(change);\n    }\n    async saveData(e) {\n        e.preventDefault()\n        var businessDetails = {\n            name: this.state.firstName,\n            email: this.state.email,\n            password: this.state.password,\n        }\n        var results = await axios.post(\"http://localhost:3003/registerBusiness\", businessDetails)\n        if (results.status != 200) {\n        } else {\n            var checking = sessionStorage.setItem('jwtToken', results.data)\n            protectRoutes()\n            this.props.authorizeBusiness()\n            history.push('/business')\n        }\n\n    }\n    async logIn() {\n        history.push(\"/sign-in\")\n    }\n    render() {\n        return (<div>\n\n            <h1 >Fill in your personal details</h1>\n            <div className=\"signing\">\n\n            </div>\n            <form  >\n                <div className=\"business\">\n                    <div >\n                        <label htmlFor=\"email\">Email:</label><br />\n                        <input name=\"email\" type=\"email\" onChange={this.email} value={this.state.email} required />\n                    </div>\n                    <div className=\"password\">\n                        Password:<br />\n                        {this.state.isPasswordVisible ?\n                            <input name=\"password\" type=\"text\" onChange={(e) => this.setState({ password: e.target.value })} value={this.state.password} required /> :\n                            <input type='password' onChange={(e) => this.setState({ password: e.target.value })} value={this.state.password} />}<br />\n                        <p className='show' onClick={() => this.setState({ isPasswordVisible: !this.state.isPasswordVisible })}>{this.state.isPasswordVisible ? 'Hide' : 'Show'} Password</p>\n                    </div>\n                    <button className=\"button\" onClick={this.saveData}>sign up</button>\n                </div>\n            </form>\n            <footer className=\"business\">\n                <h1 >Already have an account?</h1>\n                <button className=\"button\" onClick={this.logIn}>Log in</button>\n            </footer>\n        </div>\n        )\n    }\n\n}\nconst mapStateToProps = (state) => {\n    return {\n        state: state\n\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        authorizeBusiness: () => {\n            dispatch(actions.authorizeBusiness())\n        },\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SigningUp)\n\n"]},"metadata":{},"sourceType":"module"}