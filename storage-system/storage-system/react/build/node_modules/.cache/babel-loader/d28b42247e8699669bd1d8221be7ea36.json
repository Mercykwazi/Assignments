{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/customer/select-location.js\";\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions/selectUnits';\nimport axios from 'axios';\nimport { log } from 'util';\nimport { Field, reduxForm } from 'redux-form';\nimport { Redirect } from 'react-router';\nimport { protectRoutes } from '../protectedRoutes';\nimport jwtDecode from 'jwt-decode';\nimport history from '../../history';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nvar ViewLocation =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewLocation, _React$Component);\n\n  function ViewLocation(props) {\n    var _this;\n\n    _classCallCheck(this, ViewLocation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewLocation).call(this, props));\n    _this.state = {\n      unitTypeDetail: [],\n      locationDetail: [],\n      availableUnitType: [],\n      redirect: false,\n      selectedUnitType: _this.props.unitType,\n      unitsDetail: [],\n      selectedLocations: _this.props.loc,\n      units: []\n    };\n    _this.unitsDetails = _this.unitsDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.unitTypeDetails = _this.unitTypeDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getUnites = _this.getUnites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectedUnit = _this.selectedUnit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.locationDetails = _this.locationDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getLocation = _this.getLocation.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.selectedLocationDetails = _this.selectedLocationDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.submitUnit = _this.submitUnit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.viewReservedUnit = _this.viewReservedUnit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ViewLocation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.unitTypeDetails();\n      this.unitsDetails();\n      this.locationDetails();\n    }\n  }, {\n    key: \"submitUnit\",\n    value: function () {\n      var _submitUnit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var reservedRoom, token, decodedToken, reservedDetails;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                reservedRoom = this.refs.selectedUnit.value;\n                token = sessionStorage.getItem('jwtToken');\n                decodedToken = jwtDecode(token);\n                _context.next = 5;\n                return axios.post(\"http://localhost:3003/reserved/\", {\n                  id: reservedRoom,\n                  decodedToken: decodedToken\n                });\n\n              case 5:\n                reservedDetails = _context.sent;\n                history.push('/rented-Unites');\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submitUnit() {\n        return _submitUnit.apply(this, arguments);\n      }\n\n      return submitUnit;\n    }()\n  }, {\n    key: \"viewReservedUnit\",\n    value: function () {\n      var _viewReservedUnit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                history.push('/rented-Unites');\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function viewReservedUnit() {\n        return _viewReservedUnit.apply(this, arguments);\n      }\n\n      return viewReservedUnit;\n    }()\n  }, {\n    key: \"unitTypeDetails\",\n    value: function () {\n      var _unitTypeDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var business, unitsD;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.get(\"http://localhost:3003/unitType/\");\n\n              case 2:\n                business = _context3.sent;\n                unitsD = business.data.rows;\n                this.setState({\n                  unitTypeDetail: unitsD\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function unitTypeDetails() {\n        return _unitTypeDetails.apply(this, arguments);\n      }\n\n      return unitTypeDetails;\n    }()\n  }, {\n    key: \"locationDetails\",\n    value: function () {\n      var _locationDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var results, locationD;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return axios.get(\"http://localhost:3003/location\");\n\n              case 3:\n                results = _context4.sent;\n                locationD = results.data.rows;\n                this.setState({\n                  locationDetail: locationD\n                });\n                _context4.next = 10;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 8]]);\n      }));\n\n      function locationDetails() {\n        return _locationDetails.apply(this, arguments);\n      }\n\n      return locationDetails;\n    }()\n  }, {\n    key: \"unitsDetails\",\n    value: function () {\n      var _unitsDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var details, unitDetail;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return axios.get(\"http://localhost:3003/units/\");\n\n              case 2:\n                details = _context5.sent;\n                console.log(\"what are the detaisl\", details);\n                unitDetail = details.data.rows;\n                this.setState({\n                  unitsDetail: unitDetail\n                });\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function unitsDetails() {\n        return _unitsDetails.apply(this, arguments);\n      }\n\n      return unitsDetails;\n    }()\n  }, {\n    key: \"selectedUnit\",\n    value: function () {\n      var _selectedUnit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var details, availableUnits;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return axios.get(\"http://localhost:3003/selectUnit/\" + this.props.unitType);\n\n              case 2:\n                details = _context6.sent;\n                availableUnits = details.data;\n                this.setState({\n                  units: availableUnits\n                });\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function selectedUnit() {\n        return _selectedUnit.apply(this, arguments);\n      }\n\n      return selectedUnit;\n    }()\n  }, {\n    key: \"selectedLocationDetails\",\n    value: function () {\n      var _selectedLocationDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var results, availableUnitTypes;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return axios.get(\"http://localhost:3003/selectLocation/\" + this.props.loc);\n\n              case 2:\n                results = _context7.sent;\n                availableUnitTypes = results.data;\n                this.setState({\n                  availableUnitType: availableUnitTypes\n                });\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function selectedLocationDetails() {\n        return _selectedLocationDetails.apply(this, arguments);\n      }\n\n      return selectedLocationDetails;\n    }()\n  }, {\n    key: \"getUnites\",\n    value: function getUnites(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.props.selectedUnitType(e.target.value);\n      setTimeout(function () {\n        _this2.selectedUnit();\n      }, 1000);\n    }\n  }, {\n    key: \"getLocation\",\n    value: function getLocation(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.props.selectedLocations(e.target.value);\n      setTimeout(function () {\n        _this3.selectedLocationDetails();\n      }, 1000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topnav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \" \", React.createElement(Link, {\n        to: '/rented-Unites',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"ViewUnits\")), React.createElement(\"button\", {\n        className: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \">   \", React.createElement(Link, {\n        to: '/log-out',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Log-out\"))), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"reserveUnit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Please select your location \"), React.createElement(\"select\", {\n        onChange: this.getLocation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"select your your location\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"select your preferred location:\"), this.state.locationDetail.length > 0 ? this.state.locationDetail.map(function (location) {\n        return React.createElement(\"option\", {\n          key: _this4.state.locationDetail.indexOf(location),\n          value: location.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, location.address2, \" \", location.country);\n      }) : null), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Please select your unit-type\"), React.createElement(\"select\", {\n        onChange: this.getUnites,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Select unit type\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Select Unit type:\"), this.state.availableUnitType.length > 0 ? this.state.availableUnitType.map(function (item) {\n        return React.createElement(\"option\", {\n          key: _this4.state.availableUnitType.indexOf(item),\n          value: item.business_name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \" \", item.name, \" \", item.length, \" \", item.width, \" \", item.height, \" \");\n      }) : null), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Please select your unit\"), React.createElement(\"select\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"select your your unit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"select your unit:\"), this.state.units.length > 0 ? this.state.units.map(function (unit) {\n        return React.createElement(\"option\", {\n          key: _this4.state.units.indexOf(unit),\n          ref: \"selectedUnit\",\n          value: \"\".concat(unit.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, unit.name);\n      }) : null), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"  \", React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.submitUnit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Reserve\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ViewLocation;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    units: state.units.unitName,\n    business: state.viewBusiness.selectedBusiness,\n    unitType: state.selectUnitType.selectUnit,\n    loc: state.selectUnitType.selectedLocation,\n    selectedUni: state.selectUnitType.selectingUnit,\n    state: state\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    selectedUnitType: function selectedUnitType(unit) {\n      dispatch(actions.selectedUnits(unit));\n    },\n    selectedLocations: function selectedLocations(location) {\n      dispatch(actions.selectLocation(location));\n    },\n    selectedUnit: function selectedUnit(units) {\n      dispatch(actions.selectedUnit(units));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewLocation);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/customer/select-location.js"],"names":["React","Provider","connect","actions","axios","log","Field","reduxForm","Redirect","protectRoutes","jwtDecode","history","BrowserRouter","Router","Route","Link","ViewLocation","props","state","unitTypeDetail","locationDetail","availableUnitType","redirect","selectedUnitType","unitType","unitsDetail","selectedLocations","loc","units","unitsDetails","bind","unitTypeDetails","getUnites","selectedUnit","locationDetails","getLocation","selectedLocationDetails","submitUnit","viewReservedUnit","reservedRoom","refs","value","token","sessionStorage","getItem","decodedToken","post","id","reservedDetails","push","get","business","unitsD","data","rows","setState","results","locationD","details","console","unitDetail","availableUnits","availableUnitTypes","e","preventDefault","target","setTimeout","length","map","location","indexOf","address2","country","item","business_name","name","width","height","unit","Component","mapStateToProps","unitName","viewBusiness","selectedBusiness","selectUnitType","selectUnit","selectedLocation","selectedUni","selectingUnit","mapDispatchToProps","dispatch","selectedUnits","selectLocation"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Provider } from 'react-redux';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions/selectUnits';\nimport axios from 'axios';\nimport { log } from 'util';\nimport { Field, reduxForm } from 'redux-form';\nimport { Redirect } from 'react-router'\nimport { protectRoutes } from '../protectedRoutes'\nimport jwtDecode from 'jwt-decode';\nimport history from '../../history'\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\n\n\nclass ViewLocation extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            unitTypeDetail: [],\n            locationDetail: [],\n            availableUnitType: [],\n            redirect: false,\n            selectedUnitType: this.props.unitType,\n            unitsDetail: [],\n            selectedLocations: this.props.loc,\n            units: [],\n        }\n        this.unitsDetails = this.unitsDetails.bind(this);\n        this.unitTypeDetails = this.unitTypeDetails.bind(this);\n        this.getUnites = this.getUnites.bind(this)\n        this.selectedUnit = this.selectedUnit.bind(this);\n        this.locationDetails = this.locationDetails.bind(this);\n        this.getLocation = this.getLocation.bind(this)\n        this.selectedLocationDetails = this.selectedLocationDetails.bind(this)\n        this.submitUnit = this.submitUnit.bind(this);\n        this.viewReservedUnit = this.viewReservedUnit.bind(this)\n    }\n\n    componentDidMount() {\n        this.unitTypeDetails()\n        this.unitsDetails()\n        this.locationDetails()\n\n    }\n\n\n    async submitUnit() {\n        var reservedRoom = this.refs.selectedUnit.value\n        var token = sessionStorage.getItem('jwtToken');\n        const decodedToken = jwtDecode(token)\n        var reservedDetails = await axios.post(\"http://localhost:3003/reserved/\", { id: reservedRoom, decodedToken: decodedToken })\n        history.push('/rented-Unites')\n    \n    }\n    async viewReservedUnit() {\n        history.push('/rented-Unites')\n\n    }\n\n    async unitTypeDetails() {\n        var business = await axios.get(\"http://localhost:3003/unitType/\")\n        var unitsD = business.data.rows;\n        this.setState({ unitTypeDetail: unitsD })\n        \n    }\n    async locationDetails() {\n        try {\n            const results = await axios.get(\"http://localhost:3003/location\")\n            var locationD = results.data.rows;\n\n            this.setState({ locationDetail: locationD })\n        } catch (e) {\n        }\n    }\n\n    async unitsDetails() {\n        var details = await axios.get(\"http://localhost:3003/units/\")\n        console.log(\"what are the detaisl\",details)\n        var unitDetail = details.data.rows;\n        this.setState({ unitsDetail: unitDetail })\n    }\n\n    async selectedUnit() {\n        var details = await axios.get(\"http://localhost:3003/selectUnit/\" + this.props.unitType)\n        var availableUnits = details.data\n        this.setState({ units: availableUnits })\n    }\n    async selectedLocationDetails() {\n        var results = await axios.get(\"http://localhost:3003/selectLocation/\" + this.props.loc)\n\n        var availableUnitTypes = results.data\n        this.setState({ availableUnitType: availableUnitTypes })\n    }\n\n    getUnites(e) {\n        e.preventDefault()\n        this.props.selectedUnitType(e.target.value)\n        setTimeout(() => {\n            this.selectedUnit();\n        }, 1000);\n    }\n    getLocation(e) {\n        e.preventDefault()\n        this.props.selectedLocations(e.target.value)\n        setTimeout(() => {\n            this.selectedLocationDetails();\n        }, 1000);\n    }\n    render() {\n        return (<div>\n            <div className=\"topnav\">\n                <button className=\"button\"> < Link to={'/rented-Unites'}>ViewUnits</Link></button>\n                <button className=\"button\">>   <Link to={'/log-out'}>Log-out</Link></button>\n\n            </div>\n            <form >\n                <div className=\"reserveUnit\">\n                    <h2 >Please select your location </h2>\n                    <select onChange={this.getLocation}>\n                        <option value=\"select your your location\">select your preferred location:</option>\n                        {this.state.locationDetail.length > 0 ? this.state.locationDetail.map(location => {\n                            return <option key={this.state.locationDetail.indexOf(location)} value={location.id}>{location.address2} {location.country}</option>\n                        }) : null}\n                    </select><br />\n                    <h2 >Please select your unit-type</h2>\n                    <select onChange={this.getUnites}>\n                        <option value=\"Select unit type\">Select Unit type:</option>\n                        {this.state.availableUnitType.length > 0 ? this.state.availableUnitType.map(item => {\n                            return <option key={this.state.availableUnitType.indexOf(item)} value={item.business_name}> {item.name} {item.length} {item.width} {item.height} </option>\n                        }) : null}\n                    </select>\n                    <br />\n                    <h2>Please select your unit</h2>\n                    <select>\n                        <option value=\"select your your unit\">select your unit:</option>\n                        {this.state.units.length > 0 ? this.state.units.map(unit => {\n                            return <option key={this.state.units.indexOf(unit)} ref=\"selectedUnit\" value={`${unit.id}`}>{unit.name}</option>\n                        }) : null}\n                    </select><br />\n                </div>\n            <div>  <button className=\"button\" onClick={this.submitUnit} >Reserve</button></div><br />\n            </form>\n        </div >\n        )\n    }\n\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        units: state.units.unitName,\n        business: state.viewBusiness.selectedBusiness,\n        unitType: state.selectUnitType.selectUnit,\n        loc: state.selectUnitType.selectedLocation,\n        selectedUni: state.selectUnitType.selectingUnit,\n        state: state,\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        selectedUnitType: unit => {\n            dispatch(actions.selectedUnits(unit))\n        },\n        selectedLocations: location => {\n            dispatch(actions.selectLocation(location))\n        },\n        selectedUnit: (units) => {\n            dispatch(actions.selectedUnit(units))\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewLocation)"]},"metadata":{},"sourceType":"module"}