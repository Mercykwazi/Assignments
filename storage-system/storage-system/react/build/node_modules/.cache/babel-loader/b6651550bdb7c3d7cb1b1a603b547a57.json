{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/customer/log-in.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as actions from '../../actions/log-in';\nimport * as customerLogIn from '../../actions/register';\nimport { protectRoutes } from '../protectedRoutes';\nimport history from '../../history';\nimport { checkUserStatus } from '../../index';\n\nvar LogIn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LogIn, _React$Component);\n\n  function LogIn(props) {\n    var _this;\n\n    _classCallCheck(this, LogIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LogIn).call(this, props));\n    _this.state = {\n      signUpDetails: [],\n      email: _this.props.email,\n      password: _this.props.userPassword,\n      isPasswordVisible: false,\n      error: false,\n      errorMessage: \"\"\n    };\n    _this.email = _this.email.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.password = _this.password.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveData = _this.saveData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(LogIn, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      checkUserStatus();\n    }\n  }, {\n    key: \"email\",\n    value: function email(e) {\n      var change = {};\n      change[e.target.name] = e.target.value;\n      this.props.updatingEmail(e.target.value);\n      this.setState(change);\n    }\n  }, {\n    key: \"password\",\n    value: function password(e) {\n      this.props.updatingPassword(e.target.value);\n    }\n  }, {\n    key: \"saveData\",\n    value: function () {\n      var _saveData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var customerDetails, results, session;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                customerDetails = {\n                  email: this.props.emailAddress,\n                  password: this.props.userPassword\n                };\n                _context.next = 4;\n                return axios.post(\"http://localhost:3003/signIn/\", customerDetails);\n\n              case 4:\n                results = _context.sent;\n\n                if (results.status != 200) {\n                  this.setState({\n                    error: true,\n                    errorMessage: results.data.message\n                  });\n                } else {\n                  session = sessionStorage.setItem('jwtToken', results.data);\n                  protectRoutes();\n                  this.props.authorizeCustomer();\n                  history.push(\"/view-units\");\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function saveData(_x) {\n        return _saveData.apply(this, arguments);\n      }\n\n      return saveData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"validation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Log in\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        onChange: this.email,\n        value: this.state.email,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Password:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), this.state.isPasswordVisible ? React.createElement(\"input\", {\n        name: \"password\",\n        type: \"text\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        value: this.state.password,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }) : React.createElement(\"input\", {\n        type: \"password\",\n        onChange: this.password,\n        value: this.props.userPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"show\",\n        onClick: function onClick() {\n          return _this2.setState({\n            isPasswordVisible: !_this2.state.isPasswordVisible\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.state.isPasswordVisible ? 'Hide' : 'Show', \" Password\")), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.saveData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Log in\"))));\n    }\n  }]);\n\n  return LogIn;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state,\n    emailAddress: state.logIn.email,\n    userPassword: state.logIn.password\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updatingEmail: function updatingEmail(email) {\n      dispatch(actions.emailAddress(email));\n    },\n    updatingPassword: function updatingPassword(text) {\n      dispatch(actions.password(text));\n    },\n    authorizeCustomer: function authorizeCustomer() {\n      dispatch(customerLogIn.authorizeCustomer());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogIn);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/customer/log-in.js"],"names":["React","connect","axios","actions","customerLogIn","protectRoutes","history","checkUserStatus","LogIn","props","state","signUpDetails","email","password","userPassword","isPasswordVisible","error","errorMessage","bind","saveData","e","change","target","name","value","updatingEmail","setState","updatingPassword","preventDefault","customerDetails","emailAddress","post","results","status","data","message","session","sessionStorage","setItem","authorizeCustomer","push","Component","mapStateToProps","logIn","mapDispatchToProps","dispatch","text"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as actions from '../../actions/log-in'\nimport * as customerLogIn from '../../actions/register'\nimport { protectRoutes } from '../protectedRoutes';\nimport history from '../../history'\nimport { checkUserStatus } from '../../index'\n\nclass LogIn extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            signUpDetails: [],\n            email: this.props.email,\n            password: this.props.userPassword,\n            isPasswordVisible: false,\n            error: false,\n            errorMessage: \"\"\n\n        }\n        this.email = this.email.bind(this)\n        this.password = this.password.bind(this)\n        this.saveData = this.saveData.bind(this)\n    }\n    componentDidMount() {\n        checkUserStatus()\n    }\n\n    email(e) {\n        var change = {};\n        change[e.target.name] = e.target.value;\n        this.props.updatingEmail(e.target.value)\n        this.setState(change);\n    }\n    password(e) {\n        this.props.updatingPassword(e.target.value)\n    }\n    async saveData(e) {\n        e.preventDefault()\n        var customerDetails = {\n            email: this.props.emailAddress,\n            password: this.props.userPassword,\n        }\n        var results = await axios.post(\"http://localhost:3003/signIn/\", customerDetails)\n        if (results.status != 200) {\n            this.setState({ error: true, errorMessage: results.data.message })\n        } else {\n        var session= sessionStorage.setItem('jwtToken', results.data)\n            protectRoutes()\n            this.props.authorizeCustomer()\n            history.push(\"/view-units\")\n        }\n    }\n\n\n    render() {\n     \n        return (<div>\n            <p className=\"validation\">{this.state.errorMessage}</p>\n            <form  >\n                <div className=\"login\">\n                    <h1>Log in</h1>\n                    <div >\n                        <label htmlFor=\"email\">Email:</label><br />\n                        <input name=\"email\" type=\"email\" onChange={this.email} value={this.state.email} required />\n                    </div>\n                    <div className=\"password\"   >\n                        Password:<br />\n                        {this.state.isPasswordVisible ?\n                            <input name=\"password\" type=\"text\" onChange={(e) => this.setState({ password: e.target.value })} value={this.state.password} required /> :\n                            <input type='password' onChange={this.password} value={this.props.userPassword} />}<br />\n                        <p className='show' onClick={() => this.setState({ isPasswordVisible: !this.state.isPasswordVisible })}>{this.state.isPasswordVisible ? 'Hide' : 'Show'} Password</p>\n                    </div>\n                    <button className=\"button\" onClick={this.saveData}>Log in</button>\n                </div>\n            </form>\n\n        </div>\n        )\n    }\n\n}\nconst mapStateToProps = (state) => {\n    return {\n        state: state,\n        emailAddress: state.logIn.email,\n        userPassword: state.logIn.password\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        updatingEmail: email => {\n            dispatch(actions.emailAddress(email))\n        },\n        updatingPassword: text => {\n            dispatch(actions.password(text))\n        }, authorizeCustomer: () => {\n            dispatch(customerLogIn.authorizeCustomer())\n        },\n    }\n}\n\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogIn)"]},"metadata":{},"sourceType":"module"}