{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/log-in.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as actions from '../../actions/signIn';\nimport history from '../../history';\nimport { protectRoutes } from '../protectedRoutes';\nimport { checkUserStatus } from '../../index';\nimport * as businessLogIn from '../../actions/register';\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignIn, _React$Component);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this, props));\n    _this.state = {\n      signUpDetails: [],\n      email: _this.props.email,\n      isPasswordVisible: false,\n      error: false,\n      errorMessage: \"\"\n    };\n    _this.email = _this.email.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.password = _this.password.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveData = _this.saveData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      checkUserStatus();\n    }\n  }, {\n    key: \"email\",\n    value: function email(e) {\n      var change = {};\n      change[e.target.name] = e.target.value;\n      this.props.updatingEmail(e.target.value);\n      this.setState(change);\n    }\n  }, {\n    key: \"password\",\n    value: function password(e) {\n      this.props.updatingPassword(e.target.value);\n    }\n  }, {\n    key: \"saveData\",\n    value: function () {\n      var _saveData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var customerDetails, results, checking;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                customerDetails = {\n                  email: this.props.emailAddress,\n                  password: this.props.userPassword\n                };\n                _context.next = 4;\n                return axios.post(\"http://localhost:3003/logIn/\", customerDetails);\n\n              case 4:\n                results = _context.sent;\n\n                if (results.status != 200) {\n                  this.setState({\n                    error: true,\n                    errorMessage: results.data.message\n                  });\n                } else {\n                  checking = sessionStorage.setItem('jwtToken', results.data);\n                  protectRoutes();\n                  this.props.authorizeBusiness();\n                  history.push('/business');\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function saveData(_x) {\n        return _saveData.apply(this, arguments);\n      }\n\n      return saveData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"validation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, this.state.errorMessage), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Log in\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        onChange: this.email,\n        value: this.state.email,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Password:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), this.state.isPasswordVisible ? React.createElement(\"input\", {\n        name: \"password\",\n        type: \"text\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        value: this.state.password,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }) : React.createElement(\"input\", {\n        type: \"password\",\n        onChange: this.password,\n        value: this.props.userPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"show\",\n        onClick: function onClick() {\n          return _this2.setState({\n            isPasswordVisible: !_this2.state.isPasswordVisible\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, this.state.isPasswordVisible ? 'Hide' : 'Show', \" Password\")), React.createElement(\"button\", {\n        className: \"button\",\n        onClick: this.saveData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Log in\"))));\n    }\n  }]);\n\n  return SignIn;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state,\n    emailAddress: state.signIn.email,\n    userPassword: state.signIn.password\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updatingEmail: function updatingEmail(email) {\n      dispatch(actions.userEmailAddress(email));\n    },\n    updatingPassword: function updatingPassword(text) {\n      dispatch(actions.userPassword(text));\n    },\n    authorizeBusiness: function authorizeBusiness() {\n      dispatch(businessLogIn.authorizeBusiness());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/src/components/business/log-in.js"],"names":["React","connect","axios","actions","history","protectRoutes","checkUserStatus","businessLogIn","SignIn","props","state","signUpDetails","email","isPasswordVisible","error","errorMessage","bind","password","saveData","e","change","target","name","value","updatingEmail","setState","updatingPassword","preventDefault","customerDetails","emailAddress","userPassword","post","results","status","data","message","checking","sessionStorage","setItem","authorizeBusiness","push","Component","mapStateToProps","signIn","mapDispatchToProps","dispatch","userEmailAddress","text"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport * as actions from '../../actions/signIn'\nimport history from '../../history'\nimport { protectRoutes } from '../protectedRoutes';\nimport { checkUserStatus } from '../../index'\nimport * as businessLogIn from '../../actions/register'\n\nclass SignIn extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            signUpDetails: [],\n            email: this.props.email,\n            isPasswordVisible: false,\n            error: false,\n            errorMessage: \"\"\n\n        }\n        this.email = this.email.bind(this)\n        this.password = this.password.bind(this)\n        this.saveData = this.saveData.bind(this)\n    }\n    componentDidMount() {\n        checkUserStatus()\n    }\n\n\n    email(e) {\n        var change = {};\n        change[e.target.name] = e.target.value;\n        this.props.updatingEmail(e.target.value)\n        this.setState(change);\n    }\n    password(e) {\n        this.props.updatingPassword(e.target.value)\n    }\n    async saveData(e) {\n        e.preventDefault()\n        var customerDetails = {\n            email: this.props.emailAddress,\n            password: this.props.userPassword,\n        }\n        var results = await axios.post(\"http://localhost:3003/logIn/\", customerDetails)\n        if (results.status != 200) {\n            this.setState({ error: true, errorMessage: results.data.message })\n        } else {\n            var checking = sessionStorage.setItem('jwtToken', results.data)\n            protectRoutes()\n            this.props.authorizeBusiness()\n            history.push('/business')\n        }\n    }\n\n    render() {\n\n        return (<div>\n            <p className='validation'>{this.state.errorMessage}</p>\n\n            <form  >\n                <div className=\"business\">\n                    <h1>Log in</h1>\n\n                    <div >\n                        <label htmlFor=\"email\">Email:</label><br />\n                        <input name=\"email\" type=\"email\" onChange={this.email} value={this.state.email} required />\n                    </div>\n                    <div className=\"password\"   >\n                        Password:<br />\n                        {this.state.isPasswordVisible ?\n                            <input name=\"password\" type=\"text\" onChange={(e) => this.setState({ password: e.target.value })} value={this.state.password} required /> :\n                            <input type='password' onChange={this.password} value={this.props.userPassword} />}<br />\n                        <p className='show' onClick={() => this.setState({ isPasswordVisible: !this.state.isPasswordVisible })}>{this.state.isPasswordVisible ? 'Hide' : 'Show'} Password</p>\n                    </div>\n                    <button className=\"button\" onClick={this.saveData}>Log in</button>\n                </div>\n            </form>\n\n\n        </div>\n        )\n    }\n\n}\nconst mapStateToProps = (state) => {\n    return {\n        state: state,\n        emailAddress: state.signIn.email,\n        userPassword: state.signIn.password\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        updatingEmail: email => {\n            dispatch(actions.userEmailAddress(email))\n        },\n        updatingPassword: text => {\n            dispatch(actions.userPassword(text))\n        }, authorizeBusiness: () => {\n            dispatch(businessLogIn.authorizeBusiness())\n        },\n    }\n}\n\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)"]},"metadata":{},"sourceType":"module"}