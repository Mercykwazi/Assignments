{"ast":null,"code":"import _regeneratorRuntime from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/src/components/business/forms/view-business.js\";\nimport React from 'react';\nimport * as actions from '../../../actions/view-business';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport jwtDecode from 'jwt-decode';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport history from '../../../history';\n\nvar ViewBusiness =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ViewBusiness, _React$Component);\n\n  function ViewBusiness(props) {\n    var _this;\n\n    _classCallCheck(this, ViewBusiness);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewBusiness).call(this, props));\n    _this.state = {\n      businessDetail: [],\n      selectedBusiness: _this.props.select,\n      errorMessage: \"\",\n      err: false\n    };\n    _this.businessDetails = _this.businessDetails.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.submitData = _this.submitData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ViewBusiness, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.businessDetails();\n    }\n  }, {\n    key: \"businessDetails\",\n    value: function () {\n      var _businessDetails = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var token, decodedToken, decodedEmail, business, businessD;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                token = sessionStorage.getItem('jwtToken');\n                decodedToken = jwtDecode(token);\n                decodedEmail = decodedToken.email;\n                _context.next = 5;\n                return axios.get(\"http://localhost:3003/business/\" + decodedEmail);\n\n              case 5:\n                business = _context.sent;\n                console.log(\"business\", business);\n                businessD = business.data.rows;\n                this.setState({\n                  businessDetail: businessD\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function businessDetails() {\n        return _businessDetails.apply(this, arguments);\n      }\n\n      return businessDetails;\n    }()\n  }, {\n    key: \"submitData\",\n    value: function submitData() {\n      history.push('/location');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topnav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/business',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Business\"), React.createElement(Link, {\n        to: '/view-business',\n        className: \"active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"view-business\"), React.createElement(Link, {\n        to: '/location',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Location\"), React.createElement(Link, {\n        to: '/blocks',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"blocks\"), React.createElement(Link, {\n        to: '/view-blocks',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \"view-blocks\"), React.createElement(Link, {\n        to: '/unit-type',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"unit-type\"), React.createElement(Link, {\n        to: '/units',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, \"units\"), React.createElement(Link, {\n        to: '/log-out',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Log-out\"), React.createElement(Link, {\n        to: '/business-unites',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"View Reserved unites\")), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Select your business\"), React.createElement(\"div\", {\n        className: \"view-business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        onChange: function onChange(e) {\n          return _this2.props.setTheBusiness(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Select business\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Select business:\"), this.state.businessDetail.length > 0 ? this.state.businessDetail.map(function (item) {\n        return React.createElement(\"option\", {\n          key: _this2.state.businessDetail.indexOf(item),\n          value: item.business_name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, item.business_name);\n      }) : null), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"next\",\n        onClick: this.submitData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"next\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ViewBusiness;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    select: state.viewBusiness.selectedBusiness,\n    state: state\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setTheBusiness: function setTheBusiness(name) {\n      dispatch(actions.businessName(name));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewBusiness);","map":{"version":3,"sources":["/home/tcgpc1/workspace/Assignments/storage-system/storage-system/react/src/components/business/forms/view-business.js"],"names":["React","actions","connect","axios","Redirect","jwtDecode","BrowserRouter","Router","Route","Link","history","ViewBusiness","props","state","businessDetail","selectedBusiness","select","errorMessage","err","businessDetails","bind","submitData","token","sessionStorage","getItem","decodedToken","decodedEmail","email","get","business","console","log","businessD","data","rows","setState","push","e","setTheBusiness","target","value","length","map","item","indexOf","business_name","Component","mapStateToProps","viewBusiness","mapDispatchToProps","dispatch","name","businessName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as actions from '../../../actions/view-business';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { Redirect } from 'react-router'\nimport jwtDecode from 'jwt-decode';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport history from '../../../history';\n\n\nclass ViewBusiness extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            businessDetail: [],\n            selectedBusiness: this.props.select,\n            errorMessage: \"\",\n            err: false,\n        }\n        this.businessDetails = this.businessDetails.bind(this);\n        this.submitData = this.submitData.bind(this)\n    }\n    componentDidMount() {\n        this.businessDetails()\n    }\n\n    async businessDetails() {\n        var token = sessionStorage.getItem('jwtToken');\n        const decodedToken = jwtDecode(token)\n        var decodedEmail = decodedToken.email\n        var business = await axios.get(\"http://localhost:3003/business/\" + decodedEmail)\n        console.log(\"business\", business)\n        var businessD = business.data.rows;\n            this.setState({ businessDetail: businessD })\n        \n    }\n\n    submitData() {\n        history.push('/location')\n    }\n\n\n    render() {\n        return (<div>\n              <div className=\"topnav\">\n        < Link to={'/business'} >Business</Link>\n        <Link to={'/view-business'} className=\"active\">view-business</Link>\n        <Link to={'/location'}>Location</Link>\n        <Link to={'/blocks'}>blocks</Link>\n        <Link to={'/view-blocks'}>view-blocks</Link>\n        <Link to={'/unit-type'}>unit-type</Link>\n        <Link to={'/units'}>units</Link>\n        <Link to={'/log-out'}>Log-out</Link>\n        <Link to={'/business-unites'}>View Reserved unites</Link>\n    </div>\n            <h2>Select your business</h2>\n            <div className=\"view-business\">\n                <select onChange={(e) => this.props.setTheBusiness(e.target.value)}>\n                    <option value=\"Select business\">Select business:</option>\n                    {this.state.businessDetail.length > 0 ? this.state.businessDetail.map(item => {\n                        return <option key={this.state.businessDetail.indexOf(item)} value={item.business_name}>{item.business_name}</option>\n                    }) : null}\n                </select><br />\n                <button className=\"next\" onClick={this.submitData}>next</button><br />\n            </div>\n        </div>)\n    }\n}\nconst mapStateToProps = (state) => {\n    return {\n        select: state.viewBusiness.selectedBusiness,\n        state: state\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setTheBusiness: name => {\n            dispatch(actions.businessName(name))\n        },\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewBusiness)\n"]},"metadata":{},"sourceType":"module"}